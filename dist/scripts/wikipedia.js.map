{"version":3,"sources":["../../scripts/wikipedia.js"],"names":["request","require","exports","wikiSearch","bot","name","commands","isCommand","private","rtn","from","message","res","data","JSON","parse","getBody","encodeURI","query","search","title","replace","e","console","log"],"mappings":";;AACA,IAAIA,UAAUC,QAAQ,cAAR,CAAd;;AAEAC,QAAQC,UAAR,GAAqB,UAASC,GAAT,EAAc;AAC/B,WAAO;AACHC,cAAM,kBADH;AAEHC,kBAAU,CAAC,MAAD,EAAS,WAAT,CAFP;AAGHC,mBAAW,IAHR;AAIHC,iBAAS,KAJN;AAKHC,aAAK,aAACC,IAAD,EAAOC,OAAP,EAAmB;AACpB,gBAAIC,MAAMZ,QAAQ,KAAR,EAAe,0EAAwEW,OAAxE,GAAgF,2CAA/F,CAAV;AACA,gBAAI;AACA,oBAAIE,OAAOC,KAAKC,KAAL,CAAWH,IAAII,OAAJ,EAAX,CAAX;AACA,uBAAO,iCAA+BC,UAAUJ,KAAKK,KAAL,CAAWC,MAAX,CAAkB,CAAlB,EAAqBC,KAArB,CAA2BC,OAA3B,CAAmC,IAAnC,EAAyC,GAAzC,CAAV,CAAtC;AACH,aAHD,CAGE,OAAOC,CAAP,EAAU;AACRC,wBAAQC,GAAR,CAAYF,CAAZ;AACH;AAEJ;AAdE,KAAP;AAgBH,CAjBD","file":"wikipedia.js","sourcesContent":["\r\nlet request = require('sync-request');\r\n\r\nexports.wikiSearch = function(bot) {\r\n    return {\r\n        name: 'wikipedia search',\r\n        commands: ['wiki', 'wikipedia'],\r\n        isCommand: true,\r\n        private: false,\r\n        rtn: (from, message) => {\r\n            let res = request('GET', 'https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch='+message+'&srwhat=text&srprop=timestamp&format=json' );\r\n            try {\r\n                let data = JSON.parse(res.getBody());\r\n                return 'https://www.wikiwand.com/en/'+encodeURI(data.query.search[0].title.replace(/ /g, '_'));\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n\r\n        }\r\n    }\r\n};"]}