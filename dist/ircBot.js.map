{"version":3,"sources":["../ircBot.js"],"names":["irc","require","moment","Bot","nick","channels","mainChannel","pass","activeUsers","connect","console","log","commands","client","Client","autoRejoin","floodProtection","addListeners","setInterval","updateActiveUsers","addListener","message","say","send","from","to","checkMessage","eventJoin","eventPart","oldnick","newnick","eventNick","activeUser","current","Date","sendTo","checkPingedUser","checkCommands","checkNonCommands","contains","found","i","isCommand","private","rtn","length","name","active","pinged","getTime","away","lastActive","duration","humanize","getActiveUsers","msg","oldNick","newNick","indexOf","updateNick","user","setInactiveUser","push","cont","stri","toLowerCase","search","module","exports"],"mappings":"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","file":"ircBot.js","sourcesContent":["\"use strict\"\r\nlet irc = require('irc');\r\nvar moment = require('moment');\r\nclass Bot {\r\n    constructor (nick, channels, mainChannel, pass) {\r\n        this.nick = nick;\r\n        this.channels = channels;\r\n        this.mainChannel = mainChannel;\r\n        this.pass = pass;\r\n        this.activeUsers = [];\r\n        this.connect();\r\n        console.log('Booting up bot...');\r\n        this.commands = require('./scripts')(this).commands;\r\n    }\r\n    connect() {\r\n        this.client = new irc.Client('chat.freenode.net', this.nick, { autoRejoin: true, channels: this.channels, floodProtection:true});\r\n        this.addListeners();\r\n        setInterval(() => this.updateActiveUsers(), 60000);\r\n    }\r\n    addListeners() {\r\n        this.client.addListener('error', message => console.log(message));\r\n        this.client.addListener('registered',(message)  => {\r\n            this.client.say('nickserv', 'identify '+this.nick+' '+this.pass);\r\n            this.client.send('nick', this.nick);\r\n            console.log('Bot connected');\r\n        });\r\n        this.client.addListener('message', (from, to, message) => this.checkMessage(from, to, message));\r\n        this.client.addListener('join'+this.mainChannel, (from) => this.eventJoin(from));\r\n        this.client.addListener('part'+this.mainChannel, (from) => this.eventPart(from));\r\n        this.client.addListener('nick', (oldnick, newnick, channels) => this.eventNick(oldnick, newnick, channels));\r\n\r\n    }\r\n    checkMessage(from, to, message) {\r\n        if(from == \"pmllbot\") return;\r\n        this.activeUser = from;\r\n        var current = new Date();\r\n        if(to == \"pmllbot\") var sendTo = from; else var sendTo = to;\r\n        this.checkPingedUser(message);\r\n        this.checkCommands(sendTo, from, message);\r\n        this.checkNonCommands(sendTo, from, message);\r\n    }\r\n    checkCommands(sendTo, from, message) {\r\n        if (contains(['pmllbot','~'], message)) {\r\n            var found = false;\r\n            for(var i in this.commands) {\r\n                if(contains(this.commands[i].commands, message) && this.commands[i].isCommand) {\r\n                    found = true;\r\n                    if(this.commands[i].private) {\r\n                        this.client.say(from, this.commands[i].rtn(from,message));\r\n                    } else {\r\n                        this.client.say(sendTo, this.commands[i].rtn(from,message));\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            if(!found && contains(['pmllbot'], message)) this.client.say(sendTo, 'Yo, ' + from + ', what\\'s up?');\r\n        }\r\n    }\r\n    checkNonCommands(sendTo, from, message) {\r\n        for (var i in this.commands) {\r\n            if(!this.commands[i].isCommand) {\r\n                if(contains(this.commands[i].commands, message)) {\r\n                    if(this.commands[i].private) {\r\n                        this.client.say(from, this.commands[i].rtn(from,message));\r\n                    } else {\r\n                        this.client.say(sendTo, this.commands[i].rtn(from,message));\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    checkPingedUser(message) {\r\n        for (var i = 0; i < this.activeUsers.length; i++) {\r\n            if(contains(this.activeUsers[i].name,message)) {\r\n                if(!this.activeUsers[i].active && typeof this.activeUsers[i].pinged != \"undefined\") {\r\n                    if(this.activeUsers[i].pinged.getTime() + 100000 <= current.getTime()) {\r\n                        if(this.activeUsers[i].away != false) {\r\n                            this.client.say(sendTo, \"away msg: \" + this.activeUsers[i].away);\r\n                        }\r\n                        if (this.activeUsers[i].lastActive.getTime() + 600000 <= current.getTime()) {\r\n                            this.client.say(sendTo, this.activeUsers[i].name + ' was last active ' + moment.duration(this.activeUsers[i].lastActive.getTime() - new Date().getTime()).humanize(true));\r\n                            this.activeUsers[i].pinged = current;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n    updateActiveUsers() {\r\n        var current = new Date();\r\n        for (var i = 0; i < this.activeUsers.length; i++) {\r\n            if(this.activeUsers[i].lastActive.getTime() + 900000 <= current.getTime()) {\r\n                this.activeUsers[i].active = false;\r\n                this.activeUsers[i].away = false;\r\n            }\r\n        }\r\n        console.log('active: '+this.getActiveUsers());\r\n    }\r\n    set activeUser(user) {\r\n        var current = new Date();\r\n        if(user == \"pmllbot\") {\r\n            console.log('Bot joined channel');\r\n            return;\r\n        }\r\n        if(this.activeUsers.length == 0) {\r\n            this.activeUsers.push({name: user, lastActive: current, active: true, away: false});\r\n        } else {\r\n            for (var i = 0; i < this.activeUsers.length; i++) {\r\n                if(this.activeUsers[i].name == user) {\r\n                    this.activeUsers[i].lastActive = current;\r\n                    this.activeUsers[i].active = true;\r\n                    this.activeUsers[i].away = false;\r\n                    return;\r\n                }\r\n            }\r\n            this.activeUsers.push({name: user, lastActive: current, active:true, away: false});\r\n        }\r\n    }\r\n    setInactiveUser(nick) {\r\n        for (var i = 0; i < this.activeUsers.length; i++) {\r\n            if(this.activeUsers[i].name == nick) {\r\n                this.activeUsers[i].active = false;\r\n                this.activeUsers[i].pinged = new Date();\r\n            }\r\n        }\r\n    }\r\n    setAway(nick, msg) {\r\n        for (var i = 0; i < this.activeUsers.length; i++) {\r\n            if(this.activeUsers[i].name == nick) {\r\n                this.activeUsers[i].away = msg;\r\n                this.activeUsers[i].active = false;\r\n                this.activeUsers[i].pinged = new Date();\r\n            }\r\n        }\r\n    }\r\n    getActiveUsers(nick) {\r\n        var rtn = '';\r\n        for (var i = 0; i < this.activeUsers.length; i++) {\r\n            if(this.activeUsers[i].active == true && this.activeUsers[i].name != nick) {\r\n                rtn += this.activeUsers[i].name;\r\n                if(this.activeUsers.length - 1  != i) {\r\n                    rtn += \", \";\r\n                }\r\n            }\r\n        }\r\n        return rtn;\r\n    }\r\n    updateNick(oldNick,newNick) {\r\n        for (var i = 0; i < this.activeUsers.length; i++) {\r\n            if(this.activeUsers[i].name == oldNick) {\r\n                this.activeUsers[i].name = newNick;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    eventNick(oldNick, newNick, channels) {\r\n        if(channels.indexOf(this.mainChannel) !== -1) this.updateNick(oldNick, newNick);\r\n    }\r\n    eventPart(user) {\r\n        console.log(user + \" left\");\r\n        this.setInactiveUser(user);\r\n    }\r\n    eventJoin(user) {\r\n        var active = this.getActiveUsers(user);\r\n        this.activeUser = user;\r\n        if(user != \"pmllbot\") {\r\n            this.client.say(this.mainChannel, \"Hey, \" + user + \"! Currently the active users are: \" + active);\r\n        }\r\n    }\r\n    eventMessage(from, to, message) {\r\n        this.activeUser = from;\r\n        this.checkMessage(from, to, message);\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction contains(cont, stri) {\r\n        stri = stri.toLowerCase();\r\n        if(typeof cont == \"string\") {\r\n            return stri.indexOf(cont.toLowerCase()) !== -1;\r\n        }\r\n        if(cont[0] == \"regex\") {\r\n            return stri.search(cont[1]) !== -1;\r\n        }\r\n        for(var i = 0; i < cont.length; i++) {\r\n            if (stri.indexOf(cont[i].toLowerCase()) !== -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\nmodule.exports = Bot;\r\n"]}